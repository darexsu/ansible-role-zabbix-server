---
- name: Converge
  hosts: all 

  vars:
    merge:
      zabbix_server:                   # Zabbix-server ---
        enabled: true
        version: "6.0"
        server_name: "Zabbix server"  
        db_type: "MYSQL"
        db_port: "3306"
        db_name: "zabbix"
        db_user: "zabbix"
        db_password: "change_me"
      zabbix_server_install:
        enabled: true
      zabbix_server_repo:
        enabled: true
      zabbix_server_conf:
        enabled: true
      zabbix_server_gui:
        enabled: true
      mariadb:                          # MariaDB ---------
        enabled: true
        version: "10.5"
      mariadb_repo:
        enabled: true
      mariadb_install:
        enabled: true
        remove_old:
          enabled: true
      mariadb_database:
        zabbix_server:
          enabled: true
          remove_old: true
      mariadb_user:
        zabbix_server:
          enabled: true
      mariadb_sql:
        zabbix_server:
          schema: true
      php:                               # PHP ------------
        enabled: true
        version: "7.4"
      php_repo:
        enabled: true
      php_install:
        enabled: true
      php_fpm: 
        enabled: true
        vars:
          date_timezone: "Europe/Moscow" 
          unix_socket:
            enabled: true
      nginx:                            # Nginx ------------
        enabled: true
      nginx_repo:
        enabled: true
      nginx_install:
        enabled: true
      nginx_conf:
        enabled: true
      nginx_virtualhost: 
        enabled: true

  tasks:
  - name: include role darexsu.zabbix_server
    include_role: 
      name: darexsu.zabbix_server